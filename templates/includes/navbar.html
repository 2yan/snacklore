<!-- Navigation -->
<nav class="navbar">
    <div class="navbar-left">
        <a href="{{ url_for('index') }}" class="logo">
            <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" />
                <path d="M7 2v20" />
                <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />
            </svg>
            Snacklore
        </a>
        {% if breadcrumbs %}
        <nav class="navbar-breadcrumbs">
            {% for crumb in breadcrumbs %}
            <div class="breadcrumb-item {% if loop.last %}active{% endif %}">
                {% if crumb.url and not loop.last %}
                <a href="{{ crumb.url }}">{{ crumb.label }}</a>
                {% else %}
                <span>{{ crumb.label }}</span>
                {% endif %}
            </div>
            {% if not loop.last %}
            <span class="breadcrumb-separator">/</span>
            {% endif %}
            {% endfor %}
        </nav>
        {% endif %}
    </div>
    <button class="mobile-menu-toggle" aria-label="Toggle mobile menu" aria-expanded="false">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
    <div class="nav-links">
        <a href="{{ url_for('directory') }}" class="nav-link">Recipes</a>
        <a href="{{ url_for('world_map') }}" class="nav-link">World</a>
    </div>
    <div class="auth-buttons">
        {% if current_user and current_user.is_authenticated %}
        <span class="username-greeting">Hello, {{ current_user.username }}</span>
        <a href="{{ url_for('logout') }}" class="btn btn-ghost">Log Out</a>
        {% else %}
        <a href="{{ url_for('login') }}" class="btn btn-ghost">Log In</a>
        <a href="{{ url_for('register') }}" class="btn btn-primary">Sign Up</a>
        {% endif %}
    </div>
</nav>
<div class="mobile-menu-overlay" id="mobile-menu-overlay">
    <div class="mobile-menu-content">
        <a href="{{ url_for('directory') }}" class="mobile-nav-link">Recipes</a>
        <a href="{{ url_for('world_map') }}" class="mobile-nav-link">World</a>
        <div class="mobile-auth-section">
            {% if current_user and current_user.is_authenticated %}
            <span class="mobile-username-greeting">Hello, {{ current_user.username }}</span>
            <a href="{{ url_for('logout') }}" class="btn btn-ghost mobile-auth-btn">Log Out</a>
            {% else %}
            <a href="{{ url_for('login') }}" class="btn btn-ghost mobile-auth-btn">Log In</a>
            <a href="{{ url_for('register') }}" class="btn btn-primary mobile-auth-btn">Sign Up</a>
            {% endif %}
        </div>
    </div>
</div>
<script>
    const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
    const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
    const body = document.body;
    
    if (mobileMenuToggle && mobileMenuOverlay) {
        mobileMenuToggle.addEventListener('click', function() {
            const isExpanded = mobileMenuToggle.getAttribute('aria-expanded') === 'true';
            mobileMenuToggle.setAttribute('aria-expanded', !isExpanded);
            mobileMenuOverlay.classList.toggle('active');
            body.classList.toggle('menu-open');
        });
        
        // Close menu when clicking overlay
        mobileMenuOverlay.addEventListener('click', function(e) {
            if (e.target === mobileMenuOverlay) {
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
                mobileMenuOverlay.classList.remove('active');
                body.classList.remove('menu-open');
            }
        });
        
        // Close menu when clicking a link
        const mobileLinks = mobileMenuOverlay.querySelectorAll('.mobile-nav-link');
        mobileLinks.forEach(link => {
            link.addEventListener('click', function() {
                mobileMenuToggle.setAttribute('aria-expanded', 'false');
                mobileMenuOverlay.classList.remove('active');
                body.classList.remove('menu-open');
            });
        });
    }
</script>

